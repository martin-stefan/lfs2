<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>

        // const second = () => {
        //     setTimeout(() => {
        //         console.log('async');
        //     }, 2000)
        // } 

        // const first = () => {
        //     console.log('hi');
        //     second();
        //     console.log('end');
        // }
        // first();

        // function getRecipe() {
		// 			setTimeout(() => {
		// 				const recipeID = [553, 555, 892, 223];

		// 				setTimeout((id) => {
		// 					const recipe = {
		// 						title: 'Tomato',
		// 						chef: 'jonas'
		// 					};
		// 					console.log(`${id}: ${recipe.chef} made ${recipe.title}`);
		// 				}, 1000, recipeID[2]);
		// 			}, 1500);
        // }

        // getRecipe();

        const getID = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve([553, 555, 892, 223]); //can pass array in as reject as well
            }, 1500);
        });

        const getRecipe = recID => {
            return new Promise((resolve, reject) => {
                setTimeout(id => {
                    const recipe = {
                        title: 'tomato', 
                        chef: 'jonas'
                    };
                    resolve(`${id}: ${recipe.title}`)
                }, 1500, recID);
            });
        };

        const getRel = chef => {
            return new Promise((resolve, reject) => {
                setTimeout(ch => {
                    const recipe2 = {
                        title: 'pizza', 
                        chef: 'jonas'
                    };
                    resolve(`${ch}: ${recipe2.title}`);
                }, 1500, chef);
            });
        };

        // getID
        // .then(ids => {
        //     console.log(ids);
        //     return getRecipe(ids[2]);
        // })
        // .then(recipe => {
        //     console.log(recipe);
        //     return getRel('jonas');
        // })
        // .then(recipe => {
        //     console.log(recipe);
        // })
        // .catch(error => {
        //     console.log(error);
        // });

        // async function always returns a promise
        async function getRecipes() {
            const ids = await getID;
            console.log(ids);
            const recipe = await getRecipe(ids[2]);
            console.log(recipe);
            const rel = await getRel('jonas');
            console.log(rel);

            return recipe;
        }

        getRecipes().then(result => {
            console.log(`${result} is great`);
        });


        
    </script>
</body>
</html>